define("markline/0.5.3/markline",["jquery/2.1.1/jquery"],function(e,t,n){function a(e){return"[object String]"===Object.prototype.toString.call(e)}function r(e,t){this.element=e;var n=i(t);this.timeline=new c(this.element,n)}function s(e){if(!e)return new Date;var t=/^(\d{4})(?:[/-](\d{1,2})(?:[/-](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2}))?)?)?)?)?$/,n=e.match(t);if(n){var a=n[1],r=parseInt(n[2]||1,10)-1,s=n[3]||1,l=n[4]||0,o=n[5]||0,i=n[6]||0;return new Date(a,r,s,l,o,i)}}function l(e){var t=/^\d{4}$/,n=/^\d{4}[\/\-]\d{1,2}$/,a=s(e);return t.test(e)?a.setYear(a.getFullYear()+1):n.test(e)&&(11===a.getMonth()?(a.setYear(a.getFullYear()+1),a.setMonth(0)):a.setMonth(a.getMonth()+1)),a}function o(e,t){var n=/!\[([^\]]*)\]\(([^\)]+)\)/g,a=/\[([^\]]*)\]\(([^\)]+)\)/g,r=/(\*\*|__)(.*?)\1/g,s=/(\*|_)(.*?)\1/g,l=/(\~\~?)(.*?)\1/g,o=/(^|[^a-zA-Z0-9])@([^\s\t,\(\)\[\]\{\}]+)/g,i=/\{@mention\}/gi,c=/(?:^|[\s\t])\#([^\s\t]+)/g,p=e.replace(n,'<a href="$2" class="img" title="$1" target="_blank">$1</a>');return p=p.replace(a,'<a href="$2" target="_blank">$1</a>'),p=p.replace(r,"<strong>$2</strong>"),p=p.replace(s,"<em>$2</em>"),p=p.replace(l,"<del>$2</del>"),t.mention&&(p=p.replace(o,function(e,n,a){var r=t.mention||u;return n+'<a href="'+r.replace(i,a)+'" target="_blank">@'+a+"</a>"})),p=p.replace(c,function(e,n){var a,r=t.tags||t.tag||{};if(r.hasOwnProperty(n)){var s=(r[n]||"").split(/,[\s\t]+/),l=s[0],o=s[1];a=' style="color:'+l+";background-color:"+o+';"'}return'<span class="tags"'+a+">#"+n+"</span>"})}function i(e){function t(e){for(;u.body.hasOwnProperty(e);)e+=" ";y=o(e,u.meta),u.body[y]=[],b=!0}for(var n,r,i,c=e.split(/\r\n|\r|\n/),u={title:"",meta:{},body:{}},p=/^#\s+(.*)$/,d=/^[\-\*]\s+([^:]+):\s*(.*)$/,h=/^[\s\t]+[\-\*]\s+([^:]+):\s*(.*)$/,m=/^\-{2,}$/,f=/^##+\s+(.*)$/,v=/^[\*\-]\s+(([0-9\/\-]+)(?:~([0-9\/\-]*))?)\s+(.*)$/,g=/^\s+[\*\-]\s+(([0-9\/\-]+)(?:~([0-9\/\-]*))?)\s+(.*)$/,y="",b=!1,_=!1,$=0,j=c.length;j>$;$++){var w,x=c[$];if(w=x.match(p))u.title=o(w[1],u.meta);else if(!b&&(w=x.match(d))){var k=w[1],q=w[2];u.meta[k]=q,r=k,i=q,_=!0}else if(!b&&(w=x.match(h))){a(u.meta[r])&&(u.meta[r]={"default":i});var k=w[1],q=w[2];u.meta[r][k]=q,_=!0}else if(x.match(m))t("");else if(w=x.match(f)){var Y=w[1];t(Y)}else if(w=x.match(v)){u.body[y]||(u.body[y]=[]);var D=w[2],F=void 0===w[3]?D:w[3],O=w[4],T={date:w[1],"date-start":s(D),"date-end":l(F),name:o(O,u.meta),events:[]};u.body[y].push(T),n=T,b=!0}else if(w=x.match(g)){var L=w[1],M=w[2],P=void 0===w[3]?M:w[3],S=w[4];n.events.push({date:L,"date-start":s(M),"date-end":l(P),name:o(S,u.meta)}),b=!0}}return u}var c=e("markline/0.5.3/timeline"),u=(e("jquery/2.1.1/jquery"),"https://github.com/{@mention}");r.prototype.render=function(){this.timeline.render()},n.exports=r}),define("markline/0.5.3/timeline",["jquery/2.1.1/jquery"],function(e,t,n){function a(e,t){this._element=l(e),this.title=t.title||"",this.meta=t.meta||{},this.body=t.body||{}}function r(e){return parseInt(e/864e5*i/365.24,10)}function s(e){return"[object Function]"===Object.prototype.toString.call(e)}var l=e("jquery/2.1.1/jquery"),o=30,i=100;a.prototype._process=function(e,t){if(t)for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];s(t["group:start"])&&t["group:start"].call(this,n,a);for(var r=0,l=a.length;l>r;r++){var o=a[r];if(s(t["line:start"])&&t["line:start"].call(this,o),o.events)for(var i=0,c=o.events.length;c>i;i++)s(t.event)&&t.event.call(this,o.events[i]);s(t["line:stop"])&&t["line:stop"].call(this,o)}s(t["group:stop"])&&t["group:stop"].call(this,n,a)}},a.prototype.render=function(){function e(e){e.preventDefault();var t=f.x+(m.x-e.clientX),n=f.y+(m.y-e.clientY);console.log("D",t,n),h._element.scrollLeft(t),h._element.scrollTop(n)}var t,n;this._process(this.body,{"line:start":function(e){var a=e["date-start"],r=e["date-end"];(!t||t>a)&&(t=a),(!n||r>n)&&(n=r)}});var a=t.getFullYear(),s=n.getFullYear()+2;t=new Date(a,0,1);for(var i=['<div class="dates">',"<ol>"],c=a,u=0;s>=c;c++,u++)i.push("<li><label>",c,"show"===this.meta.age?" ("+u+")":"","</label></li>");i.push("</ol>","</div>");var p=['<div class="events" id="events">'],d=0;this._process(this.body,{"group:start":function(e){p.push('<div class="groups">',"<label>",e,"</label>","<ol>")},"group:stop":function(){p.push("</ol>","</div>")},"line:start":function(e){var n=e["date-start"],a=e["date-end"],s=r(n-t)+o;d=n;var l=r(a-n);8>l&&(l=8),p.push('<li style="margin-left:',s,'px;">',"<div>",'<ol style="width:',l,'px;">')},"line:stop":function(e){p.push("</ol>","<time>",e.date,"</time>","<label>",e.name,"</label>","</div>","</li>")},event:function(e){var t=r(e["date-start"]-d),n=r(e["date-end"]-e["date-start"]);8>n&&(n=8,t-=4),p.push('<li style="left:',t,"px;width:",n,'px" title="',e.date," ",e.name,'"></li>')}});var h=this;this._element.addClass("markline"),this._element.on("scroll",function(){var e=l(this),t=l("> header",this);t.css({left:e.scrollLeft(),bottom:-e.scrollTop()});var n=l(".dates",this);n.css({top:e.scrollTop()});var a=l(".groups > label",this);a.css({left:e.scrollLeft()-90})}),this._element.append(["<header>",this.title,"</header>"].join("")),this._element.append(i.join("")),this._element.append(p.join(""));var m,f;this._element.on("mousedown",function(t){m={x:t.clientX,y:t.clientY},f={x:h._element.scrollLeft(),y:h._element.scrollTop()},console.log(f),console.log(m),h._element.on("mousemove",e)}),this._element.on("mouseup",function(){h._element.off("mousemove",e)})},n.exports=a});