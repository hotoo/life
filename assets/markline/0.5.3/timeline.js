define("markline/0.5.3/timeline",["jquery/2.1.1/jquery"],function(e,t,l){function s(e,t){this._element=i(e),this.title=t.title||"",this.meta=t.meta||{},this.body=t.body||{}}function n(e){return parseInt(e/864e5*a/365.24,10)}function o(e){return"[object Function]"===Object.prototype.toString.call(e)}var i=e("jquery/2.1.1/jquery"),r=30,a=100;s.prototype._process=function(e,t){if(t)for(var l in e)if(e.hasOwnProperty(l)){var s=e[l];o(t["group:start"])&&t["group:start"].call(this,l,s);for(var n=0,i=s.length;i>n;n++){var r=s[n];if(o(t["line:start"])&&t["line:start"].call(this,r),r.events)for(var a=0,c=r.events.length;c>a;a++)o(t.event)&&t.event.call(this,r.events[a]);o(t["line:stop"])&&t["line:stop"].call(this,r)}o(t["group:stop"])&&t["group:stop"].call(this,l,s)}},s.prototype.render=function(){function e(e){e.preventDefault();var t=f.x+(v.x-e.clientX),l=f.y+(v.y-e.clientY);console.log("D",t,l),d._element.scrollLeft(t),d._element.scrollTop(l)}var t,l;this._process(this.body,{"line:start":function(e){var s=e["date-start"],n=e["date-end"];(!t||t>s)&&(t=s),(!l||n>l)&&(l=n)}});var s=t.getFullYear(),o=l.getFullYear()+2;t=new Date(s,0,1);for(var a=['<div class="dates">',"<ol>"],c=s,p=0;o>=c;c++,p++)a.push("<li><label>",c,"show"===this.meta.age?" ("+p+")":"","</label></li>");a.push("</ol>","</div>");var u=['<div class="events" id="events">'],h=0;this._process(this.body,{"group:start":function(e){u.push('<div class="groups">',"<label>",e,"</label>","<ol>")},"group:stop":function(){u.push("</ol>","</div>")},"line:start":function(e){var l=e["date-start"],s=e["date-end"],o=n(l-t)+r;h=l;var i=n(s-l);8>i&&(i=8),u.push('<li style="margin-left:',o,'px;">',"<div>",'<ol style="width:',i,'px;">')},"line:stop":function(e){u.push("</ol>","<time>",e.date,"</time>","<label>",e.name,"</label>","</div>","</li>")},event:function(e){var t=n(e["date-start"]-h),l=n(e["date-end"]-e["date-start"]);8>l&&(l=8,t-=4),u.push('<li style="left:',t,"px;width:",l,'px" title="',e.date," ",e.name,'"></li>')}});var d=this;this._element.addClass("markline"),this._element.on("scroll",function(){var e=i(this),t=i("> header",this);t.css({left:e.scrollLeft(),bottom:-e.scrollTop()});var l=i(".dates",this);l.css({top:e.scrollTop()});var s=i(".groups > label",this);s.css({left:e.scrollLeft()-90})}),this._element.append(["<header>",this.title,"</header>"].join("")),this._element.append(a.join("")),this._element.append(u.join(""));var v,f;this._element.on("mousedown",function(t){v={x:t.clientX,y:t.clientY},f={x:d._element.scrollLeft(),y:d._element.scrollTop()},console.log(f),console.log(v),d._element.on("mousemove",e)}),this._element.on("mouseup",function(){d._element.off("mousemove",e)})},l.exports=s});