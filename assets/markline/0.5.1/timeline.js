define("markline/0.5.1/timeline",["jquery/2.1.1/jquery"],function(t,e,s){function l(t,e){this._element=n(t),this.title=e.title||"",this.meta=e.meta||{},this.body=e.body||{}}function i(t){return parseInt(t/864e5*o/365.24,10)}function a(t){return"[object Function]"===Object.prototype.toString.call(t)}var n=t("jquery/2.1.1/jquery"),r=30,o=100;l.prototype._process=function(t,e){if(e)for(var s in t)if(t.hasOwnProperty(s)){var l=t[s];a(e["group:start"])&&e["group:start"].call(this,s,l);for(var i=0,n=l.length;n>i;i++){var r=l[i];if(a(e["line:start"])&&e["line:start"].call(this,r),r.events)for(var o=0,p=r.events.length;p>o;o++)a(e.event)&&e.event.call(this,r.events[o]);a(e["line:stop"])&&e["line:stop"].call(this,r)}a(e["group:stop"])&&e["group:stop"].call(this,s,l)}},l.prototype.render=function(){var t,e;this._process(this.body,{"line:start":function(s){var l=s["date-start"],i=s["date-end"];(!t||t>l)&&(t=l),(!e||i>e)&&(e=i)}});var s=t.getFullYear(),l=e.getFullYear()+2;t=new Date(s,0,1);for(var a=['<div class="dates">',"<ol>"],o=s,p=0;l>=o;o++,p++)a.push("<li><label>",o,"show"===this.meta.age?" ("+p+")":"","</label></li>");a.push("</ol>","</div>");var h=['<div class="events" id="events">'],d=0;this._process(this.body,{"group:start":function(t){h.push('<div class="groups">',"<label>",t,"</label>","<ol>")},"group:stop":function(){h.push("</ol>","</div>")},"line:start":function(e){var s=e["date-start"],l=e["date-end"],a=i(s-t)+r;d=s;var n=i(l-s);8>n&&(n=8),h.push('<li style="margin-left:',a,'px;">',"<div>",'<ol style="width:',n,'px;">')},"line:stop":function(t){h.push("</ol>","<time>",t.date,"</time>","<label>",t.name,"</label>","</div>","</li>")},event:function(t){var e=i(t["date-start"]-d),s=i(t["date-end"]-t["date-start"]);8>s&&(s=8,e-=4),h.push('<li style="left:',e,"px;width:",s,'px" title="',t.date," ",t.name,'"></li>')}});this._element.addClass("markline"),this._element.on("scroll",function(){var t=n(this),e=n("> header",this);e.css({left:t.scrollLeft(),bottom:-t.scrollTop()});var s=n(".dates",this);s.css({top:t.scrollTop()});var l=n(".groups > label",this);l.css({left:t.scrollLeft()-90})}),this._element.append(["<header>",this.title,"</header>"].join("")),this._element.append(a.join("")),this._element.append(h.join(""))},s.exports=l});